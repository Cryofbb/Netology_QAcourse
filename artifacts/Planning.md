#План автоматизации</h1>

## Перечень автоматизируемых сценариев

Корректными данными при заполнении полей ввода следует считать:
1. Номер карты: цифровые символы, 16 шт., в формате **** **** **** ****
1. Месяц: 01-12, но не ранее текущего месяца в случае, если указан текущий год
1. Год: последние две цифры порядкового номера года, не ранее текущего года, не более 5ти лет от текущего года
1. Владелец: буквенные символы латинского алфавита
1. CVC: цифровые символы, 3 шт.

Карты, представленные для тестирования (файл data.json):
* 4444 4444 4444 4441, status APPROVED
* 4444 4444 4444 4442, status DECLINED

Тестируемые Базы данных:
* MySql
* PostgreSQL

### Тестовые сценарии


<details>
   <summary>Позитивные сценарии</summary>

   1. Оплата по карте со статусом APPROVED  
   Номер карты 4444 4444 4444 4441, остальные поля заполнены корректными значениями  
   Ожидаемый результат: появилось всплывающее окно "Операция одобрена Банком", в БД в payment_entity появилась запись со статусом APPROVED

   1. Кредит по данным карты со статусом APPROVED   
   Номер карты 4444 4444 4444 4441, остальные поля заполнены корректными значениями  
   Ожидаемый результат: появилось всплывающее окно "Операция одобрена Банком", в БД в credit_request_entity появилась запись со статусом APPROVED

   1. Оплата по карте со статусом DECLINED    
   Номер карты 4444 4444 4444 4442, остальные поля заполнены корректными значениями   
   Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в payment_entity появилась запись со статусом DECLINED

   1. Кредит по данным карты со статусом DECLINED  
   Номер карты 4444 4444 4444 4442, остальные поля заполнены корректными значениями  
   Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в credit_request_entity появилась запись со статусом DECLINED
</details>
<details>
<summary>Негативные сценарии</summary>

1. Оплата по несуществующей карте   
   Номер карты сгенерирован Faker, остальные поля заполнены корректными значениями  
   Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в payment_entity новая запись не появилась

2. Кредит по данным несуществующей карты   
   Номер карты сгенерирован Faker, остальные поля заполнены корректными значениями  
   Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в credit_request_entity новая запись не появилась

3. Оплата по карте, указан невалидный номер   
   Номер карты из 15 цифр, остальные поля заполнены корректными значениями  
   Ожидаемый результат: под полем Номер карты появилось сообщение об ошибке "Неверный формат", в БД в payment_entity новая запись не появилась

4. Кредит по данным карты, указан невалидный номер    
   Номер карты из 15 цифр, остальные поля заполнены корректными значениями  
   Ожидаемый результат: под полем Номер карты появилось сообщение об ошибке "Неверный формат", в БД в credit_request_entity новая запись не появилась

5. Оплата по карте с истекшим сроком действия (месяц)  
   Номер карты 4444 4444 4444 4441, указать предыдущий месяц, текущий год, остальные поля заполнены корректными значениями  
   Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в payment_entity новая запись не появилась

6. Кредит по данным карты с истекшим сроком действия (месяц)  
   Номер карты 4444 4444 4444 4441, указать предыдущий месяц, текущий год, остальные поля заполнены корректными значениями  
   Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в credit_request_entity новая запись не появилась

7. Оплата по данным карты, указан невалидный месяц   
   Номер карты 4444 4444 4444 4441, в поле Месяц указать 00, остальные поля заполнены корректными значениями  
   Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в payment_entity новая запись не появилась

8. Кредит по данным карты, указан невалидный месяц   
   Номер карты 4444 4444 4444 4441, в поле Месяц указать 00, остальные поля заполнены корректными значениями  
   Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в credit_request_entity новая запись не появилась
   
9. Оплата по данным карты, указан невалидный месяц   
   Номер карты 4444 4444 4444 4441, в поле Месяц указать 13, остальные поля заполнены корректными значениями  
   Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в payment_entity новая запись не появилась

10. Кредит по данным карты, указан невалидный месяц   
    Номер карты 4444 4444 4444 4441, в поле Месяц указать 13, остальные поля заполнены корректными значениями  
    Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в payment_entity новая запись не появилась

11. Оплата по карте с истекшим сроком действия (год)  
    Номер карты 4444 4444 4444 4441, указать предыдущий год, остальные поля заполнены корректными значениями  
    Ожидаемый результат: под полем Год появилось сообщение об ошибке "Истёк срок действия карты", в БД в payment_entity новая запись не появилась

12. Кредит по данным карты с истекшим сроком действия (год)  
    Номер карты 4444 4444 4444 4441, указать предыдущий год, остальные поля заполнены корректными значениями  
    Ожидаемый результат: под полем Год появилось сообщение об ошибке "Истёк срок действия карты", в БД в credit_request_entity новая запись не появилась

13. Оплата по данным карты, указан невалидный год   
    Номер карты 4444 4444 4444 4441, в поле Год указать "последние две цифры текущего года + 6", остальные поля заполнены корректными значениями  
    Ожидаемый результат: под полем Год появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в payment_entity новая запись не появилась

14. Кредит по данным карты, указан невалидный год   
    Номер карты 4444 4444 4444 4441, в поле Год указать "последние две цифры текущего года + 6", остальные поля заполнены корректными значениями  
    Ожидаемый результат: под полем Год появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в credit_request_entity новая запись не появилась

15. Оплата по данным карты, указано некорректное значение в поле Владелец  
    Номер карты 4444 4444 4444 4441, в поле Владелец указать некорректные данные, остальные поля заполнены корректными значениями  
    Ожидаемый результат: под полем Владелец появилось сообщение об ошибке, в БД в payment_entity новая запись не появилась

16. Кредит по данным карты, указано некорректное значение в поле Владелец   
    Номер карты 4444 4444 4444 4441, в поле Владелец указать некорректные данные, остальные поля заполнены корректными значениями  
    Ожидаемый результат: под полем Владелец появилось сообщение об ошибке, в БД в credit_request_entity новая запись не появилась

17. Оплата по данным карты, указано некорректное значение в поле CVC/CVV   
    Номер карты 4444 4444 4444 4441, в поле CVC/CVV указать 0, остальные поля заполнены корректными значениями  
    Ожидаемый результат: под полем CVC/CVV появилось сообщение об ошибке "Неверный формат", в БД в payment_entity новая запись не появилась

18. Кредит по данным карты, указано некорректное значение в поле CVC/CVV   
    Номер карты 4444 4444 4444 4441, в поле CVC/CVV указать 0, остальные поля заполнены корректными значениями  
    Ожидаемый результат: под полем CVC/CVV появилось сообщение об ошибке "Неверный формат", в БД в credit_request_entity новая запись не появилась
</details>
<h3>Перечень используемых инструментов с обоснованием выбора</h3>

- Java JDK 11 - Популярный язык программирования для написания тестов.
- IntelliJ IDEA Ultimate. Необходима для написания кода и запуска тестов и взаимодействия с БД. Одна из самых популярных IDE.
- <details>
  <summary>Плагины для IDEA</summary>
  
  - Gradle/Maven - Проект-менеджер автоматической сборки.
  - JUnit5 - Тестовый фреймворк.
  - Selenide - Фреймворк для автоматизированного тестирования веб-приложений.
  - Allure Framework - Генерация отчетов.
  - JavaFaker - Генерация данных, для заполнения полей в заявке.
  - Docker - запуск контейнеров с ПО, необходимым для работы с сервисом, без установки на ПК.
  </details>
  
- Git. Для контроля версий и дальнейшей интеграции тестов

- <details>
  <summary>Браузеры, необходимые для проведения кросс-браузерного тестирования. 4 самых популярных браузера на текущий момент.</summary>

    - Microsoft Edge
    - Mozilla Firefox v.91
    - Safari v.13
    - Google Chrome v.92
  </details>

<h3>Перечень и описание возможных рисков при автоматизации</h3>

- Отсутствие классовых идентификаторов в коде, затрудняют поиск Css селекторов и,
  в случае изменения структуры сайта или его текстовой части, может привести к неработоспособности тестов.

- В случае отсутствия тестовой версии для тестирования, возможно увеличение нагрузки на отдел обработки заявок, из-за заполнения БД тестовыми данными.

- Возможна временная неработоспособность бд, если количество поступающих заявок превосходит расчетную нагрузку.

## Перечень и описание возможных рисков при автоматизации
* Отсутствие документации не позволяет определить, какое поведение стоит считать некорректным
* Возможны проблемы из-за необходимости поддержки двух СУБД (MySQL, Postgres)
* Отсутствие классовых идентификаторов в коде, затрудняют поиск Css селекторов и,
  в случае изменения структуры сайта или его текстовой части, может привести к неработоспособности тестов.

## Интервальная оценка с учетом рисков (в часах)

- Настройка тестового окружения - 10
- Написание и отладка автотестов - 40
- Прогон тестов и заведение issue - 8
- Доработки - 16
- Подготовка отчета по итогам автоматизированного тестирования и автоматизации - 10
- Подключение CI - 20
**Итого с учетом рисков: 104 часа**

## План сдачи работ
Автоматизация - 11.09.2021  
Подготовка отчетных документов - 14.09.2021  